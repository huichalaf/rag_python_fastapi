/home/ubuntu/teacher_gpt/function_calling/server.py:150: DeprecationWarning: There is no current event loop
  asyncio.get_event_loop().run_until_complete(start_server)
/home/ubuntu/teacher_gpt/function_calling/server.py:151: DeprecationWarning: There is no current event loop
  asyncio.get_event_loop().run_forever()
Servidor WebSocket iniciado en 127.0.0.1:5678...
{'user': 'papo9292@gmail.com', 'token': 'd09bed1f2e0a1f53382d45f6b1f24c4a8f2918844e9c9144ce5a427d3027ae40', 'chat_type': 'basic-chat', 'text': '"Answer this question: "hola', 'type_user': 'free'}
error en la temperatura y max_tokens:  int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
daily usage:  0
Cliente conectado.
Hola is a Spanish greeting that translates to "hello" in English. It is commonly used to greet someone or get their attention.Error durante la comunicación con el cliente 1: 'content'
añadiendo query
añadido
{'user': 'papo9292@gmail.com', 'token': 'd09bed1f2e0a1f53382d45f6b1f24c4a8f2918844e9c9144ce5a427d3027ae40', 'chat_type': 'basic-chat', 'text': '"Answer this question: "de que trata el documento?', 'temperature': '50', 'max_tokens': '200', 'type_user': 'pro'}
daily usage:  1
Cliente conectado.
Lo siento, pero no puedo responder a esa pregunta sin más contexto. ¿Podrías proporcionar más detalles sobre el documento al que te refieres?Error durante la comunicación con el cliente 1: 'content'
añadiendo query
añadido
Error al recibir mensaje del cliente: no close frame received or sent
Error al recibir mensaje del cliente: no close frame received or sent
{'user': 'papo9292@gmail.com', 'token': 'fd6252e8ee14eda2803efab7f06336aa8d9016088e385eb4a58a93b4c45849cc', 'chat_type': 'basic-chat', 'text': '"Answer this question: "hola', 'temperature': '50', 'max_tokens': '200', 'type_user': 'pro'}
daily usage:  2
Cliente conectado.
Hola is a Spanish greeting that means "hello" in English. It is commonly used to greet someone or to start a conversation.Error durante la comunicación con el cliente 1: 'content'
añadiendo query
añadido
{'user': 'papo9292@gmail.com', 'token': 'fd6252e8ee14eda2803efab7f06336aa8d9016088e385eb4a58a93b4c45849cc', 'chat_type': 'math', 'text': 'calcula la integral de x**2 evaluada entre -20 y 20', 'temperature': '50', 'max_tokens': '200', 'type_user': 'pro'}
daily usage:  3
prompt processed:  calcula la integral de  x  ** 2 evaluada entre  - 20 y 20
prompt template:  Solve all the math expressions, answer step by step and in the language of the question: 
calcula la integral de  x  ** 2 evaluada entre  - 20 y 20
Let's think step by step
functions:  [{'name': 'operate', 'description': 'take an operator and two numbers, and returns the result of the corresponding operation', 'parameters': {'type': 'object', 'properties': {'number1': {'type': 'number', 'description': 'first number'}, 'number2': {'type': 'number', 'description': 'second number'}, 'operator': {'type': 'string', 'description': 'operator'}}, 'required': ['number1', 'number2', 'operator']}}, {'name': 'trigonometric_function', 'description': 'take a trigonometric function and a number, and returns the result of the corresponding operation', 'parameters': {'type': 'object', 'properties': {'number': {'type': 'number', 'description': 'number'}, 'function': {'type': 'string', 'description': 'trigonometric function'}, 'tipo': {'type': 'string', 'description': 'degrees or radians'}}, 'required': ['number', 'function', 'tipo']}}, {'name': 'integrate', 'description': 'take a function and the limits of integration (two numbers), and returns the result of the operation and the calculated integral', 'parameters': {'type': 'object', 'properties': {'function': {'type': 'string', 'description': 'function'}, 'upLimit': {'type': 'number', 'description': 'low limit'}, 'lowLimit': {'type': 'number', 'description': 'up limit'}}}}, {'name': 'derivate', 'description': 'take a function and a number, and returns the result of the derivate evaluated and the derivative function', 'parameters': {'type': 'object', 'properties': {'function': {'type': 'string', 'description': 'function'}, 'number': {'type': 'number', 'description': 'number'}}, 'required': ['function', 'number']}}, {'name': 'statistics', 'description': 'take a list of numbers and returns the result of the operation(mean, median, mode, standard deviation, variance)', 'parameters': {'type': 'object', 'properties': {'numbers': {'type': 'string', 'description': 'numbers separated by commas'}, 'operation': {'type': 'string', 'description': 'operation'}}, 'required': ['numbers', 'operation']}}, {'name': 'logarithm', 'description': 'take a base and a number, and returns the result of the log operation', 'parameters': {'type': 'object', 'properties': {'base': {'type': 'number', 'description': 'base'}, 'number': {'type': 'number', 'description': 'number'}}, 'required': ['base', 'number']}}, {'name': 'plot', 'description': 'takes a function and (two numbers), plot the function and returns if the graph was correctly generated or not (True or False)', 'parameters': {'type': 'object', 'properties': {'function': {'type': 'string', 'description': 'function'}, 'upLimit': {'type': 'number', 'description': 'low limit'}, 'lowLimit': {'type': 'number', 'description': 'up limit'}}, 'required': ['function', 'upLimit', 'lowLimit']}}]
similarities:  [0.7423257736228388, 0.7312234480347138, 0.8063390134898779, 0.7652623491151307, 0.7457597466835125, 0.7223285736797344, 0.7019257730422682]
messages:  [{'role': 'user', 'content': "Solve all the math expressions, answer step by step and in the language of the question: \ncalcula la integral de  x  ** 2 evaluada entre  - 20 y 20\nLet's think step by step"}]
functions:  ({'name': 'integrate', 'description': 'take a function and the limits of integration (two numbers), and returns the result of the operation and the calculated integral', 'parameters': {'type': 'object', 'properties': {'function': {'type': 'string', 'description': 'function'}, 'upLimit': {'type': 'number', 'description': 'low limit'}, 'lowLimit': {'type': 'number', 'description': 'up limit'}}}}, {'name': 'derivate', 'description': 'take a function and a number, and returns the result of the derivate evaluated and the derivative function', 'parameters': {'type': 'object', 'properties': {'function': {'type': 'string', 'description': 'function'}, 'number': {'type': 'number', 'description': 'number'}}, 'required': ['function', 'number']}}, {'name': 'statistics', 'description': 'take a list of numbers and returns the result of the operation(mean, median, mode, standard deviation, variance)', 'parameters': {'type': 'object', 'properties': {'numbers': {'type': 'string', 'description': 'numbers separated by commas'}, 'operation': {'type': 'string', 'description': 'operation'}}, 'required': ['numbers', 'operation']}})
añadiendo query
añadido
{
  "id": "chatcmpl-7jD96ejWenc0Geemyfo6vXNv9YG6h",
  "object": "chat.completion",
  "created": 1691009648,
  "model": "gpt-3.5-turbo-0613",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": null,
        "function_call": {
          "name": "integrate",
          "arguments": "{\n  \"function\": \"x**2\",\n  \"lowLimit\": -20,\n  \"upLimit\": 20\n}"
        }
      },
      "finish_reason": "function_call"
    }
  ],
  "usage": {
    "prompt_tokens": 229,
    "completion_tokens": 33,
    "total_tokens": 262
  }
}
<function calculate_integral at 0x7f42a3293f60>
(5333.333333333333, 'x**3/3')
{
  "id": "chatcmpl-7jD99GS1JGWOaKEtiEOOZ3a2TujoV",
  "object": "chat.completion",
  "created": 1691009651,
  "model": "gpt-3.5-turbo-0613",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "Para calcular la integral de x^2 evaluada entre -20 y 20, vamos a seguir los siguientes pasos:\n\n1. Primero, recordemos la f\u00f3rmula de la integral definida:\n\n   \u222bf(x)dx = F(x) + C\n   \n   Donde \u222b es el s\u00edmbolo de integral, f(x) es la funci\u00f3n que queremos integrar, F(x) es la funci\u00f3n primitiva de f(x), y C es una constante.\n\n2. Ahora, necesitamos encontrar la funci\u00f3n primitiva de x^2. La funci\u00f3n primitiva de x^n se puede obtener sumando 1 al exponente y dividiendo por el nuevo exponente. En este caso, tenemos x^2, por lo que la funci\u00f3n primitiva ser\u00eda:\n\n   F(x) = (x^3)/3\n   \n3. Luego, evaluamos la funci\u00f3n primitiva en los l\u00edmites de integraci\u00f3n. Para el l\u00edmite inferior de -20:\n\n   F(-20) = (-20^3)/3 = -8000/3 = -2666.6666666666665\n   \n   Y para el l\u00edmite superior de 20:\n\n   F(20) = (20^3)/3 = 8000/3 = 2666.6666666666665\n   \n4. Por \u00faltimo, restamos el valor obtenido para el l\u00edmite inferior del valor obtenido para el l\u00edmite superior:\n\n   Integral de x^2 evaluada entre -20 y 20 = F(20) - F(-20) = 2666.6666666666665 - (-2666.6666666666665) = 5333.333333333333\n\nPor lo tanto, la integral de x^2 evaluada entre -20 y 20 es igual a 5333.333333333333."
      },
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 286,
    "completion_tokens": 391,
    "total_tokens": 677
  }
}
añadiendo query
añadido
time:  16.839098691940308
{'user': 'papo9292@gmail.com', 'token': 'fd6252e8ee14eda2803efab7f06336aa8d9016088e385eb4a58a93b4c45849cc', 'chat_type': 'basic-chat', 'text': '"Answer this question: "cuanto es 2+2?', 'type_user': 'pro'}
error en la temperatura y max_tokens:  int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
daily usage:  5
Cliente conectado.
La respuesta a la pregunta "cuánto es 2+2?" es 4.Error durante la comunicación con el cliente 1: 'content'
añadiendo query
añadido
{'user': 'papo9292@gmail.com', 'token': 'fd6252e8ee14eda2803efab7f06336aa8d9016088e385eb4a58a93b4c45849cc', 'chat_type': 'basic-chat', 'text': '"Answer this question: "cuanto es 4*2+2', 'type_user': 'pro'}
error en la temperatura y max_tokens:  int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
daily usage:  6
Cliente conectado.
La respuesta a la pregunta "cuánto es 4*2+2" es 10.Error durante la comunicación con el cliente 1: 'content'
añadiendo query
añadido
{'user': 'papo9292@gmail.com', 'token': 'fd6252e8ee14eda2803efab7f06336aa8d9016088e385eb4a58a93b4c45849cc', 'chat_type': 'basic-chat', 'text': '"Answer this question: "(4*2-5)*3+1', 'type_user': 'pro'}
error en la temperatura y max_tokens:  int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
daily usage:  7
Cliente conectado.
The answer to the expression "(4*2-5)*3+1" is 14.Error durante la comunicación con el cliente 1: 'content'
añadiendo query
añadido
{'user': 'papo9292@gmail.com', 'token': '8f544bb6c016986d7f7a7ff5f43eeef9acce6e481d1bae267a732111e397ab50', 'chat_type': 'math', 'text': 'cuanto es (4*2-5)*3 +1', 'temperature': '50', 'max_tokens': '200', 'type_user': 'pro'}
daily usage:  8
prompt processed:  cuanto es (4  * 2  - 5) * 3  + 1
prompt template:  Solve all the math expressions, answer step by step and in the language of the question: 
cuanto es (4  * 2  - 5) * 3  + 1
Let's think step by step
functions:  [{'name': 'operate', 'description': 'take an operator and two numbers, and returns the result of the corresponding operation', 'parameters': {'type': 'object', 'properties': {'number1': {'type': 'number', 'description': 'first number'}, 'number2': {'type': 'number', 'description': 'second number'}, 'operator': {'type': 'string', 'description': 'operator'}}, 'required': ['number1', 'number2', 'operator']}}, {'name': 'trigonometric_function', 'description': 'take a trigonometric function and a number, and returns the result of the corresponding operation', 'parameters': {'type': 'object', 'properties': {'number': {'type': 'number', 'description': 'number'}, 'function': {'type': 'string', 'description': 'trigonometric function'}, 'tipo': {'type': 'string', 'description': 'degrees or radians'}}, 'required': ['number', 'function', 'tipo']}}, {'name': 'integrate', 'description': 'take a function and the limits of integration (two numbers), and returns the result of the operation and the calculated integral', 'parameters': {'type': 'object', 'properties': {'function': {'type': 'string', 'description': 'function'}, 'upLimit': {'type': 'number', 'description': 'low limit'}, 'lowLimit': {'type': 'number', 'description': 'up limit'}}}}, {'name': 'derivate', 'description': 'take a function and a number, and returns the result of the derivate evaluated and the derivative function', 'parameters': {'type': 'object', 'properties': {'function': {'type': 'string', 'description': 'function'}, 'number': {'type': 'number', 'description': 'number'}}, 'required': ['function', 'number']}}, {'name': 'statistics', 'description': 'take a list of numbers and returns the result of the operation(mean, median, mode, standard deviation, variance)', 'parameters': {'type': 'object', 'properties': {'numbers': {'type': 'string', 'description': 'numbers separated by commas'}, 'operation': {'type': 'string', 'description': 'operation'}}, 'required': ['numbers', 'operation']}}, {'name': 'logarithm', 'description': 'take a base and a number, and returns the result of the log operation', 'parameters': {'type': 'object', 'properties': {'base': {'type': 'number', 'description': 'base'}, 'number': {'type': 'number', 'description': 'number'}}, 'required': ['base', 'number']}}, {'name': 'plot', 'description': 'takes a function and (two numbers), plot the function and returns if the graph was correctly generated or not (True or False)', 'parameters': {'type': 'object', 'properties': {'function': {'type': 'string', 'description': 'function'}, 'upLimit': {'type': 'number', 'description': 'low limit'}, 'lowLimit': {'type': 'number', 'description': 'up limit'}}, 'required': ['function', 'upLimit', 'lowLimit']}}]
similarities:  [0.7608069362269188, 0.7267012477232926, 0.744221297786303, 0.7488347083538945, 0.7403276722505238, 0.7199678517056493, 0.6645658634470847]
messages:  [{'role': 'user', 'content': "Solve all the math expressions, answer step by step and in the language of the question: \ncuanto es (4  * 2  - 5) * 3  + 1\nLet's think step by step"}]
functions:  ({'name': 'operate', 'description': 'take an operator and two numbers, and returns the result of the corresponding operation', 'parameters': {'type': 'object', 'properties': {'number1': {'type': 'number', 'description': 'first number'}, 'number2': {'type': 'number', 'description': 'second number'}, 'operator': {'type': 'string', 'description': 'operator'}}, 'required': ['number1', 'number2', 'operator']}}, {'name': 'derivate', 'description': 'take a function and a number, and returns the result of the derivate evaluated and the derivative function', 'parameters': {'type': 'object', 'properties': {'function': {'type': 'string', 'description': 'function'}, 'number': {'type': 'number', 'description': 'number'}}, 'required': ['function', 'number']}}, {'name': 'integrate', 'description': 'take a function and the limits of integration (two numbers), and returns the result of the operation and the calculated integral', 'parameters': {'type': 'object', 'properties': {'function': {'type': 'string', 'description': 'function'}, 'upLimit': {'type': 'number', 'description': 'low limit'}, 'lowLimit': {'type': 'number', 'description': 'up limit'}}}})
añadiendo query
añadido
{
  "id": "chatcmpl-7jDFp5nkucGYgC6oIBe0ftvUBXeop",
  "object": "chat.completion",
  "created": 1691010065,
  "model": "gpt-3.5-turbo-0613",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": null,
        "function_call": {
          "name": "operate",
          "arguments": "{\n\"number1\": 4,\n\"number2\": 2,\n\"operator\": \"*\"\n}"
        }
      },
      "finish_reason": "function_call"
    }
  ],
  "usage": {
    "prompt_tokens": 230,
    "completion_tokens": 27,
    "total_tokens": 257
  }
}
<function operate at 0x7f42a3293c40>
in operate
* 4 2
8
{
  "id": "chatcmpl-7jDFrqcoQdUtemRjZiLwpjcTHAH75",
  "object": "chat.completion",
  "created": 1691010067,
  "model": "gpt-3.5-turbo-0613",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": null,
        "function_call": {
          "name": "operate",
          "arguments": "{\n\"number1\": 8,\n\"number2\": 5,\n\"operator\": \"-\"\n}"
        }
      },
      "finish_reason": "function_call"
    }
  ],
  "usage": {
    "prompt_tokens": 265,
    "completion_tokens": 26,
    "total_tokens": 291
  }
}
añadiendo query
añadido
<function operate at 0x7f42a3293c40>
in operate
- 8 5
Error durante la comunicación con el cliente 2: name 'sustract' is not defined
{'user': 'papo9292@gmail.com', 'token': '8f544bb6c016986d7f7a7ff5f43eeef9acce6e481d1bae267a732111e397ab50', 'chat_type': 'basic-chat', 'text': '"Answer this question: "hola', 'temperature': '50', 'max_tokens': '200', 'type_user': 'pro'}
daily usage:  10
Cliente conectado.
Cliente desconectado.
HolaCliente desconectado.
 isCliente desconectado.
 aCliente desconectado.
 SpanishCliente desconectado.
 wordCliente desconectado.
 thatCliente desconectado.
 meansCliente desconectado.
 "Cliente desconectado.
helloCliente desconectado.
"Cliente desconectado.
 inCliente desconectado.
 EnglishCliente desconectado.
.Cliente desconectado.
 ItCliente desconectado.
 isCliente desconectado.
 aCliente desconectado.
 commonCliente desconectado.
 greetingCliente desconectado.
 usedCliente desconectado.
 toCliente desconectado.
 sayCliente desconectado.
 helloCliente desconectado.
 orCliente desconectado.
 hiCliente desconectado.
 toCliente desconectado.
 someoneCliente desconectado.
.